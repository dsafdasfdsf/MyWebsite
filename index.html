<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Simple Money Game</title>
<style>
  /* Reset & base */
  * {
    box-sizing: border-box;
  }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f2f7f5;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    color: #333;
  }
  header {
    background: #4caf50;
    width: 100%;
    max-width: 900px;
    padding: 12px 20px;
    color: white;
    font-size: 28px;
    font-weight: 700;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-radius: 0 0 12px 12px;
  }
  header h1 {
    margin: 0;
  }
  #topButtons {
    display: flex;
    gap: 12px;
  }
  button {
    cursor: pointer;
    background-color: #388e3c;
    border: none;
    color: white;
    font-weight: 600;
    padding: 8px 16px;
    border-radius: 12px;
    font-size: 16px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    transition: background-color 0.3s ease, transform 0.2s ease;
  }
  button:hover:not(:disabled) {
    background-color: #2e7d32;
    transform: scale(1.05);
  }
  button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
  main {
    background: white;
    margin-top: 20px;
    width: 100%;
    max-width: 900px;
    border-radius: 16px;
    padding: 24px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
    gap: 24px;
  }
  #catContainer {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 14px;
  }
  #catContainer img {
    width: 90px;
    height: 90px;
    border-radius: 16px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    transition: transform 0.5s ease;
    animation: float 6s ease-in-out infinite;
  }
  @keyframes float {
    0%, 100% { transform: translateY(0) }
    50% { transform: translateY(-10px) }
  }
  #moneyDisplay {
    font-size: 22px;
    font-weight: 700;
    text-align: center;
  }
  #secondsDisplay {
    font-size: 16px;
    color: #555;
    text-align: center;
  }
  #shopSection {
    border-top: 2px solid #4caf50;
    padding-top: 12px;
    display: none; /* hidden until implemented */
  }
  #shopSection h2 {
    margin: 0 0 12px 0;
    color: #4caf50;
    font-weight: 700;
  }
  /* Admin Panel */
  #adminPanel {
    background: #e8f5e9;
    border-radius: 16px;
    padding: 18px;
    display: none;
    flex-direction: column;
    gap: 18px;
  }
  #adminPanel h2 {
    margin: 0 0 10px 0;
    color: #2e7d32;
  }
  #playersList, #logsList {
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    padding: 10px 14px;
    max-height: 180px;
    overflow-y: auto;
    font-family: monospace;
    font-size: 14px;
  }
  #playersList li {
    padding: 4px 0;
    border-bottom: 1px solid #eee;
  }
  #playersList li:last-child {
    border-bottom: none;
  }
  #banPlayerSection {
    display: flex;
    gap: 8px;
    align-items: center;
  }
  #banPlayerSection input {
    padding: 8px 12px;
    border-radius: 12px;
    border: 1.5px solid #4caf50;
    font-size: 14px;
    flex-grow: 1;
  }
  #banPlayerSection button {
    background-color: #d32f2f;
  }
  #banPlayerSection button:hover {
    background-color: #b71c1c;
  }
  /* Popups */
  #popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #f44336;
    color: white;
    padding: 28px 42px;
    border-radius: 20px;
    font-weight: 700;
    font-size: 18px;
    box-shadow: 0 8px 20px rgba(244,67,54,0.8);
    display: none;
    z-index: 1000;
  }
  /* Login/SignIn modals */
  .modalBackdrop {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.4);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 10000;
  }
  .modal {
    background: white;
    border-radius: 18px;
    padding: 24px 32px;
    width: 320px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    text-align: center;
    animation: fadeInScale 0.4s ease forwards;
  }
  @keyframes fadeInScale {
    0% {
      opacity: 0;
      transform: scale(0.85);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }
  .modal h2 {
    margin-bottom: 18px;
    color: #4caf50;
  }
  .modal input {
    width: 100%;
    padding: 10px 14px;
    margin-bottom: 18px;
    border: 1.8px solid #4caf50;
    border-radius: 12px;
    font-size: 16px;
  }
  .modal button {
    width: 100%;
    padding: 12px 0;
    border-radius: 12px;
    border: none;
    background-color: #4caf50;
    color: white;
    font-weight: 700;
    font-size: 16px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  .modal button:hover {
    background-color: #388e3c;
  }
  .modal .closeBtn {
    margin-top: 14px;
    background: #f44336;
  }
  .modal .closeBtn:hover {
    background: #d32f2f;
  }
</style>
</head>
<body>

<header>
  <h1>Simple Money Game</h1>
  <div id="topButtons">
    <button id="shopBtn">Shop</button>
    <button id="loginBtn">Log In</button>
    <button id="signInBtn">Sign Up</button>
    <button id="logoutBtn" style="display:none;">Log Out</button>
  </div>
</header>

<main>
  <div id="moneyDisplay">Money: 0 ðŸ’°</div>
  <div id="secondsDisplay">Next +1 money in: 30 seconds</div>
  <div id="catContainer"></div>

  <section id="shopSection">
    <h2>Shop (coming soon)</h2>
    <p>Shop features are being developed...</p>
  </section>

  <section id="adminPanel">
    <h2>Admin Panel</h2>

    <div>
      <h3>Players List</h3>
      <ul id="playersList"></ul>
    </div>

    <div>
      <h3>Logs</h3>
      <ul id="logsList"></ul>
    </div>

    <div id="banPlayerSection">
      <input type="text" id="banInput" placeholder="Enter player username to ban" />
      <button id="banBtn">Ban Player</button>
    </div>
  </section>
</main>

<!-- Popup for banned message -->
<div id="popup">Error: This user is banned!</div>

<!-- Login Modal -->
<div id="loginModal" class="modalBackdrop">
  <div class="modal">
    <h2>Login</h2>
    <input type="text" id="loginUsername" placeholder="Username" autocomplete="off" />
    <input type="password" id="loginPassword" placeholder="Password" autocomplete="off" />
    <button id="loginSubmit">Log In</button>
    <button class="closeBtn" id="loginClose">Cancel</button>
  </div>
</div>

<!-- Sign Up Modal -->
<div id="signInModal" class="modalBackdrop">
  <div class="modal">
    <h2>Sign Up</h2>
    <input type="text" id="signInUsername" placeholder="Choose username" autocomplete="off" />
    <input type="password" id="signInPassword" placeholder="Choose password" autocomplete="off" />
    <button id="signInSubmit">Sign Up</button>
    <button class="closeBtn" id="signInClose">Cancel</button>
  </div>
</div>

<script>
(() => {
  // --- Data store in localStorage ---
  const STORAGE_KEY = "simpleMoneyGameData";
  const defaultData = {
    users: {
      // Pre-created admin
      cow: { password: "cow", money: 0, banned: false, isAdmin: true },
    },
    logs: [],
  };

  // Load or init data
  function loadData() {
    const dataStr = localStorage.getItem(STORAGE_KEY);
    if (!dataStr) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(defaultData));
      return JSON.parse(JSON.stringify(defaultData));
    }
    return JSON.parse(dataStr);
  }
  function saveData() {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
  }

  let data = loadData();

  // --- UI Elements ---
  const moneyDisplay = document.getElementById("moneyDisplay");
  const secondsDisplay = document.getElementById("secondsDisplay");
  const catContainer = document.getElementById("catContainer");
  const popup = document.getElementById("popup");

  const loginBtn = document.getElementById("loginBtn");
  const signInBtn = document.getElementById("signInBtn");
  const logoutBtn = document.getElementById("logoutBtn");
  const shopBtn = document.getElementById("shopBtn");

  const loginModal = document.getElementById("loginModal");
  const signInModal = document.getElementById("signInModal");

  const loginUsername = document.getElementById("loginUsername");
  const loginPassword = document.getElementById("loginPassword");
  const loginSubmit = document.getElementById("loginSubmit");
  const loginClose = document.getElementById("loginClose");

  const signInUsername = document.getElementById("signInUsername");
  const signInPassword = document.getElementById("signInPassword");
  const signInSubmit = document.getElementById("signInSubmit");
  const signInClose = document.getElementById("signInClose");

  const adminPanel = document.getElementById("adminPanel");
  const playersList = document.getElementById("playersList");
  const logsList = document.getElementById("logsList");
  const banInput = document.getElementById("banInput");
  const banBtn = document.getElementById("banBtn");

  // --- State ---
  let currentUser = null;
  let secondsToNextMoney = 30;
  let moneyInterval = null;
  let catInterval = null;

  // --- Cats ---
  const catImages = [
    "https://placekitten.com/100/100",
    "https://placekitten.com/101/100",
    "https://placekitten.com/102/100",
    "https://placekitten.com/103/100",
    "https://placekitten.com/104/100",
    "https://placekitten.com/105/100",
    "https://placekitten.com/106/100",
    "https://placekitten.com/107/100",
    "https://placekitten.com/108/100",
    "https://placekitten.com/109/100",
  ];

  function showCats() {
    catContainer.innerHTML = "";
    for (let i = 0; i < 10; i++) {
      const img = document.createElement("img");
      img.src = catImages[i];
      img.alt = "Cat";
      catContainer.appendChild(img);
    }
  }

  // --- Helpers ---
  function logEvent(text) {
    const timestamp = new Date().toLocaleTimeString();
    data.logs.unshift(`[${timestamp}] ${text}`);
    if (data.logs.length > 100) data.logs.pop();
    saveData();
    if (currentUser?.isAdmin) refreshLogs();
  }

  function refreshPlayersList() {
    playersList.innerHTML = "";
    for (const username in data.users) {
      const user = data.users[username];
      const li = document.createElement("li");
      li.textContent = `${username} | Money: ${user.money} | Banned: ${user.banned ? "Yes" : "No"}`;
      playersList.appendChild(li);
    }
  }
  function refreshLogs() {
    logsList.innerHTML = "";
    for (const log of data.logs) {
      const li = document.createElement("li");
      li.textContent = log;
      logsList.appendChild(li);
    }
  }
  function refreshUI() {
    if (!currentUser) {
      moneyDisplay.textContent = "Money: 0 ðŸ’°";
      secondsDisplay.textContent = "Next +1 money in: 30 seconds";
      adminPanel.style.display = "none";
      loginBtn.style.display = "inline-block";
      signInBtn.style.display = "inline-block";
      logoutBtn.style.display = "none";
      shopBtn.style.display = "inline-block";
      return;
    }
    if (currentUser.banned) {
      showPopup("Error: This user is banned!");
      logoutUser();
      return;
    }
    moneyDisplay.textContent = `Money: ${currentUser.money} ðŸ’°`;
    secondsDisplay.textContent = `Next +1 money in: ${secondsToNextMoney} seconds`;

    loginBtn.style.display = "none";
    signInBtn.style.display = "none";
    logoutBtn.style.display = "inline-block";
    shopBtn.style.display = "inline-block";

    if (currentUser.isAdmin) {
      adminPanel.style.display = "flex";
      refreshPlayersList();
      refreshLogs();
    } else {
      adminPanel.style.display = "none";
    }
  }
  function showPopup(text) {
    popup.textContent = text;
    popup.style.display = "block";
    setTimeout(() => {
      popup.style.display = "none";
    }, 4000);
  }
  // --- Login/Logout ---
  function loginUser(username, password) {
    const user = data.users[username];
    if (!user) {
      showPopup("Invalid username!");
      return false;
    }
    if (user.password !== password) {
      showPopup("Incorrect password!");
      return false;
    }
    if (user.banned) {
      showPopup("Error: This user is banned!");
      return false;
    }
    currentUser = user;
    currentUser.username = username;
    logEvent(`User logged in: ${username}`);
    refreshUI();
    return true;
  }
  function logoutUser() {
    if (currentUser) logEvent(`User logged out: ${currentUser.username}`);
    currentUser = null;
    refreshUI();
  }
  function signUpUser(username, password) {
    if (data.users[username]) {
      showPopup("Username already exists!");
      return false;
    }
    data.users[username] = { password, money: 0, banned: false, isAdmin: false };
    saveData();
    logEvent(`New user signed up: ${username}`);
    showPopup("Sign up successful! You can now log in.");
    return true;
  }
  // --- Ban User ---
  function banUser(username) {
    if (!data.users[username]) {
      showPopup("User not found!");
      return;
    }
    data.users[username].banned = true;
    saveData();
    logEvent(`User banned: ${username}`);
    refreshPlayersList();
    showPopup(`${username} has been banned.`);
    if (currentUser?.username === username) {
      logoutUser();
    }
  }
  // --- Money timer ---
  function startMoneyInterval() {
    if (moneyInterval) clearInterval(moneyInterval);
    moneyInterval = setInterval(() => {
      if (!currentUser || currentUser.banned) return;
      secondsToNextMoney--;
      if (secondsToNextMoney <= 0) {
        currentUser.money++;
        data.users[currentUser.username].money = currentUser.money;
        saveData();
        secondsToNextMoney = 30;
        logEvent(`+1 money for ${currentUser.username}. Total: ${currentUser.money}`);
        refreshUI();
      } else {
        secondsDisplay.textContent = `Next +1 money in: ${secondsToNextMoney} seconds`;
      }
    }, 1000);
  }
  // --- Cat images refresh ---
  function startCatInterval() {
    showCats();
    if (catInterval) clearInterval(catInterval);
    catInterval = setInterval(() => {
      showCats();
    }, 30000);
  }
  // --- Event Listeners ---
  loginBtn.addEventListener("click", () => {
    loginModal.style.display = "flex";
  });
  loginClose.addEventListener("click", () => {
    loginModal.style.display = "none";
    loginUsername.value = "";
    loginPassword.value = "";
  });
  loginSubmit.addEventListener("click", () => {
    const u = loginUsername.value.trim();
    const p = loginPassword.value;
    if (u && p) {
      if (loginUser(u, p)) {
        loginModal.style.display = "none";
        loginUsername.value = "";
        loginPassword.value = "";
        startMoneyInterval();
      }
    } else {
      showPopup("Please enter username and password.");
    }
  });

  signInBtn.addEventListener("click", () => {
    signInModal.style.display = "flex";
  });
  signInClose.addEventListener("click", () => {
    signInModal.style.display = "none";
    signInUsername.value = "";
    signInPassword.value = "";
  });
  signInSubmit.addEventListener("click", () => {
    const u = signInUsername.value.trim();
    const p = signInPassword.value;
    if (u && p) {
      if (signUpUser(u, p)) {
        signInModal.style.display = "none";
        signInUsername.value = "";
        signInPassword.value = "";
      }
    } else {
      showPopup("Please enter username and password.");
    }
  });

  logoutBtn.addEventListener("click", () => {
    logoutUser();
  });

  banBtn.addEventListener("click", () => {
    const userToBan = banInput.value.trim();
    if (!userToBan) {
      showPopup("Enter username to ban.");
      return;
    }
    if (userToBan === currentUser?.username) {
      showPopup("You cannot ban yourself!");
      return;
    }
    banUser(userToBan);
    banInput.value = "";
  });

  shopBtn.addEventListener("click", () => {
    alert("Shop is coming soon!");
  });

  // --- Initialization ---
  refreshUI();
  startCatInterval();
  startMoneyInterval();

})();
</script>

</body>
</html>
