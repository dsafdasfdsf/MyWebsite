<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Simple Money Game</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f0f2f5;
    margin: 0; padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    color: #222;
  }
  header {
    width: 100%;
    background: white;
    padding: 12px 20px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    display: flex;
    justify-content: flex-end;
    gap: 10px;
  }
  button {
    background: #4caf50;
    border: none;
    padding: 8px 16px;
    border-radius: 20px;
    color: white;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  button:hover {
    background: #45a045;
  }
  main {
    background: white;
    margin-top: 40px;
    padding: 30px 40px;
    border-radius: 15px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    width: 320px;
    text-align: center;
  }
  input {
    padding: 8px 12px;
    border-radius: 12px;
    border: 1px solid #ccc;
    width: 100%;
    margin: 8px 0 16px;
    font-size: 1rem;
    outline-offset: 2px;
    transition: border-color 0.25s ease;
  }
  input:focus {
    border-color: #4caf50;
  }
  #moneyDisplay {
    font-size: 1.5rem;
    margin-top: 20px;
    font-weight: 700;
    color: #4caf50;
  }
  #log {
    margin-top: 25px;
    height: 120px;
    overflow-y: auto;
    background: #e8f5e9;
    border-radius: 12px;
    padding: 10px;
    font-size: 0.9rem;
    text-align: left;
    box-shadow: inset 0 0 5px rgba(76,175,80,0.3);
  }
  #log div {
    margin-bottom: 6px;
    animation: fadeIn 0.5s ease forwards;
  }
  @keyframes fadeIn {
    from {opacity: 0; transform: translateY(10px);}
    to {opacity: 1; transform: translateY(0);}
  }
</style>
</head>
<body>

<header>
  <button id="loginBtn">Log In</button>
  <button id="signupBtn">Sign Up</button>
  <button id="logoutBtn" style="display:none; background:#f44336;">Log Out</button>
</header>

<main>
  <div id="authForm">
    <input id="username" placeholder="Username" autocomplete="off" />
    <input id="password" type="password" placeholder="Password" autocomplete="off" />
    <button id="submitBtn">Log In</button>
  </div>

  <div id="game" style="display:none;">
    <div id="welcomeMsg" style="font-weight:bold; font-size:1.2rem;"></div>
    <div id="moneyDisplay">Money: $0</div>
    <div id="log"></div>
  </div>
</main>

<script>
(() => {
  const loginBtn = document.getElementById('loginBtn');
  const signupBtn = document.getElementById('signupBtn');
  const logoutBtn = document.getElementById('logoutBtn');
  const authForm = document.getElementById('authForm');
  const submitBtn = document.getElementById('submitBtn');
  const usernameInput = document.getElementById('username');
  const passwordInput = document.getElementById('password');
  const gameDiv = document.getElementById('game');
  const moneyDisplay = document.getElementById('moneyDisplay');
  const logDiv = document.getElementById('log');
  const welcomeMsg = document.getElementById('welcomeMsg');

  let currentUser = null;
  let money = 0;
  let moneyInterval = null;
  let isSignupMode = false;
  let logs = [];

  // Hardcoded user data
  // Default user: cow/cow
  let users = {
    cow: { password: 'cow', money: 0 }
  };

  // Helpers
  function log(msg) {
    const time = new Date().toLocaleTimeString();
    logs.push(`[${time}] ${msg}`);
    if (logs.length > 20) logs.shift();
    logDiv.innerHTML = logs.map(l => `<div>${l}</div>`).join('');
    logDiv.scrollTop = logDiv.scrollHeight;
  }

  function updateMoneyDisplay() {
    moneyDisplay.textContent = `Money: $${money}`;
  }

  function startMoneyTimer() {
    if (moneyInterval) clearInterval(moneyInterval);
    moneyInterval = setInterval(() => {
      money++;
      users[currentUser].money = money;
      updateMoneyDisplay();
      log(`You earned $1! Total: $${money}`);
    }, 30000);
  }

  function showAuthForm() {
    authForm.style.display = 'block';
    gameDiv.style.display = 'none';
    logoutBtn.style.display = 'none';
    submitBtn.textContent = 'Log In';
    usernameInput.value = '';
    passwordInput.value = '';
    usernameInput.focus();
    isSignupMode = false;
  }

  function showSignupForm() {
    authForm.style.display = 'block';
    gameDiv.style.display = 'none';
    logoutBtn.style.display = 'none';
    submitBtn.textContent = 'Sign Up';
    usernameInput.value = '';
    passwordInput.value = '';
    usernameInput.focus();
    isSignupMode = true;
  }

  function showGame() {
    authForm.style.display = 'none';
    gameDiv.style.display = 'block';
    logoutBtn.style.display = 'inline-block';
    welcomeMsg.textContent = `Welcome, ${currentUser}!`;
    money = users[currentUser].money || 0;
    updateMoneyDisplay();
    log(`Logged in as ${currentUser}`);
    startMoneyTimer();
  }

  // Events
  loginBtn.onclick = () => showAuthForm();
  signupBtn.onclick = () => showSignupForm();

  logoutBtn.onclick = () => {
    currentUser = null;
    if (moneyInterval) clearInterval(moneyInterval);
    logs = [];
    logDiv.innerHTML = '';
    showAuthForm();
  };

  submitBtn.onclick = () => {
    const user = usernameInput.value.trim();
    const pass = passwordInput.value.trim();
    if (!user || !pass) {
      alert('Enter username and password');
      return;
    }
    if (isSignupMode) {
      if (users[user]) {
        alert('User already exists!');
        return;
      }
      users[user] = { password: pass, money: 0 };
      alert('Sign up successful! You can now log in.');
      showAuthForm();
      return;
    } else {
      if (!users[user]) {
        alert('User does not exist!');
        return;
      }
      if (users[user].password !== pass) {
        alert('Incorrect password!');
        return;
      }
      currentUser = user;
      showGame();
    }
  };

  // Start on login form
  showAuthForm();
})();
</script>

</body>
</html>
