<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Simple Money Game</title>
<style>
  :root{
    --blue:#2d89ef; --green:#28a745; --red:#dc3545; --muted:#6c757d;
    --bg:#ffffff; --card:#ffffff; --border:#e9e9e9;
  }
  html,body{height:100%;margin:0;background:var(--bg);color:#111;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;}
  header{max-width:1100px;margin:16px auto;padding:12px 18px;display:flex;align-items:center;justify-content:space-between;background:var(--card);border-radius:10px;border:1px solid var(--border);box-shadow:0 2px 8px rgba(0,0,0,0.03)}
  header h1{font-size:18px;margin:0;font-weight:700}
  .top-buttons{display:flex;gap:10px;align-items:center}
  button{cursor:pointer;border:0;padding:8px 12px;border-radius:10px;font-weight:700}
  .btn-blue{background:var(--blue);color:white}
  .btn-green{background:var(--green);color:white}
  .btn-red{background:var(--red);color:white}
  .btn-muted{background:var(--muted);color:white}
  main{max-width:1100px;margin:18px auto;padding:18px;background:var(--card);border-radius:12px;border:1px solid var(--border);box-shadow:0 6px 20px rgba(0,0,0,0.03);display:grid;grid-template-columns:1fr 420px;gap:18px}
  .game-area{display:flex;flex-direction:column;gap:12px}
  .panel{background:#fff;border:1px solid var(--border);border-radius:10px;padding:12px;box-shadow:0 2px 6px rgba(0,0,0,0.02)}
  #moneyDisplay{font-size:20px;font-weight:800}
  #timer{color:#666;font-weight:600}
  #floatingBall{position:absolute;width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,#007bff,#00d4ff);box-shadow:0 6px 22px rgba(0,140,255,0.12);cursor:pointer;display:none;z-index:50;pointer-events:auto}
  .admin-col{display:flex;flex-direction:column;gap:12px}
  .players-list{height:420px;overflow:auto;padding:8px;border-radius:8px;border:1px solid var(--border);background:#fff;font-family:monospace}
  .players-row{display:flex;align-items:center;justify-content:space-between;padding:8px;border-bottom:1px solid #f5f5f5}
  .player-name{font-weight:700}
  .player-actions{display:flex;gap:8px;align-items:center}
  input[type="number"]{width:90px;padding:6px;border-radius:8px;border:1px solid #ddd}
  input[type="text"]{padding:6px;border-radius:8px;border:1px solid #ddd}
  .logs{height:160px;overflow:auto;padding:8px;border-radius:8px;border:1px solid var(--border);background:#fff;font-family:monospace}
  .backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.36);display:none;align-items:center;justify-content:center;z-index:1200}
  .modal{width:340px;background:#fff;padding:18px;border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,0.12)}
  .modal h2{margin:0 0 12px;font-size:18px}
  .modal input{width:100%;padding:10px;margin:8px 0;border-radius:8px;border:1px solid #ddd}
  .small{font-size:13px;color:#666}
  footer{max-width:1100px;margin:18px auto;text-align:center;color:#777;font-size:13px}
  @media (max-width:940px){main{grid-template-columns:1fr;}.admin-col{order:2}}
</style>
</head>
<body>

<header>
  <h1>Simple Money Game</h1>
  <div class="top-buttons">
    <button id="shopBtn" class="btn-blue" title="Shop (placeholder)">Shop</button>
    <button id="loginBtn" class="btn-blue">Log In</button>
    <button id="signupBtn" class="btn-green">Sign Up</button>
    <button id="logoutBtn" class="btn-muted" style="display:none">Log Out</button>
  </div>
</header>

<main>
  <section class="game-area">
    <div class="panel">
      <div id="moneyDisplay">Money: $0</div>
      <div id="timer" class="small">Next +1 in: 30s</div>
    </div>

    <div class="panel" style="position:relative;min-height:250px;">
      <div style="font-weight:700;margin-bottom:8px">Catch the Ball</div>
      <div class="small" style="margin-bottom:12px">Click the moving ball to get +5 (login required)</div>
      <div style="height:180px;position:relative" id="ballArea">
        <div id="floatingBall" title="Click me for +5"></div>
      </div>
      <div class="small" style="margin-top:12px;color:#666">Guests can't collect the ball — log in to play.</div>
    </div>

    <div class="panel">
      <div style="font-weight:700;margin-bottom:8px">Account</div>
      <div id="accountSection" class="small">Not logged in</div>
      <div id="accountActions" style="margin-top:10px"></div>
    </div>
  </section>

  <aside class="admin-col">
    <div class="panel">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div style="font-weight:800">Admin Controls</div>
        <div class="small" id="adminHint">Admins only</div>
      </div>
      <div style="margin-top:10px">
        <div style="margin-bottom:6px;font-weight:700">Players (big list)</div>
        <div id="players" class="players-list" aria-live="polite"></div>
      </div>
    </div>

    <div class="panel">
      <div style="font-weight:700;margin-bottom:8px">Quick Admin Actions</div>
      <div style="display:flex;gap:8px;margin-bottom:8px">
        <input id="adminTarget" type="text" placeholder="username" />
        <input id="adminAmount" type="number" placeholder="+amount" />
      </div>
      <div style="display:flex;gap:8px">
        <button id="giveBtn" class="btn-green">Give</button>
        <button id="banBtn" class="btn-red">Ban</button>
        <button id="unbanBtn" style="background:#ffc107;color:#111;border-radius:10px">Unban</button>
        <button id="delBtn" style="background:#6c757d;color:white;border-radius:10px">Delete</button>
      </div>
    </div>

    <div class="panel">
      <div style="font-weight:700;margin-bottom:8px">Logs</div>
      <div id="logs" class="logs"></div>
    </div>
  </aside>
</main>

<!-- modals -->
<div id="loginBackdrop" class="backdrop"><div class="modal" role="dialog" aria-modal="true">
  <h2>Log In</h2>
  <input id="loginUser" placeholder="Username" autocapitalize="off" />
  <input id="loginPass" placeholder="Password" type="password" />
  <div style="display:flex;gap:8px">
    <button id="loginSubmit" class="btn-blue">Log In</button>
    <button id="loginCancel" class="btn-muted">Cancel</button>
  </div>
</div></div>

<div id="signupBackdrop" class="backdrop"><div class="modal" role="dialog" aria-modal="true">
  <h2>Sign Up</h2>
  <input id="signupUser" placeholder="Choose username" />
  <input id="signupPass" placeholder="Choose password" type="password" />
  <div style="display:flex;gap:8px">
    <button id="signupSubmit" class="btn-green">Sign Up</button>
    <button id="signupCancel" class="btn-muted">Cancel</button>
  </div>
</div></div>

<div id="popup" style="position:fixed;left:50%;top:20px;transform:translateX(-50%);display:none;background:var(--red);color:#fff;padding:10px 14px;border-radius:8px;z-index:1300"></div>

<footer>Simple Money Game — local demo. Passwords hashed with SHA-256 in-browser.</footer>

<script>
/* -------------- Optimized Single-file App -------------- */

/* Storage keys */
const KEY_USERS = 'smg_users_v2';
const KEY_LOGS  = 'smg_logs_v2';
const KEY_SESSION = 'smg_session_v2';

/* Small helpers */
const $ = s => document.querySelector(s);
const now = () => performance.now();

/* Crypto: SHA-256 hashing (returns hex) */
async function hashPassword(p){
  const enc = new TextEncoder().encode(p);
  const digest = await crypto.subtle.digest('SHA-256', enc);
  return Array.from(new Uint8Array(digest)).map(b=>b.toString(16).padStart(2,'0')).join('');
}

/* Load persisted state */
let users = JSON.parse(localStorage.getItem(KEY_USERS) || '{}');
let logs  = JSON.parse(localStorage.getItem(KEY_LOGS)  || '[]');

/* Ensure default admin 'cow' exists (hash computed at runtime) */
(async ()=> {
  if(!users['cow']){
    users['cow'] = { hash: await hashPassword('cow'), money:0, isAdmin:true, banned:false };
    localStorage.setItem(KEY_USERS, JSON.stringify(users));
    logs.unshift(`[${new Date().toLocaleTimeString()}] Default admin 'cow' created`);
    localStorage.setItem(KEY_LOGS, JSON.stringify(logs));
  }
})();

/* Cached DOM */
const moneyDisplay = $('#moneyDisplay');
const timerDisplay = $('#timer');
const playersDiv = $('#players');
const logsDiv = $('#logs');
const adminHint = $('#adminHint');

const loginBackdrop = $('#loginBackdrop');
const signupBackdrop = $('#signupBackdrop');
const popupEl = $('#popup');

const loginUserEl = $('#loginUser');
const loginPassEl = $('#loginPass');
const signupUserEl = $('#signupUser');
const signupPassEl = $('#signupPass');

const loginSubmitBtn = $('#loginSubmit');
const loginCancelBtn = $('#loginCancel');
const signupSubmitBtn = $('#signupSubmit');
const signupCancelBtn = $('#signupCancel');

const loginBtn = $('#loginBtn');
const signupBtn = $('#signupBtn');
const logoutBtn = $('#logoutBtn');
const shopBtn = $('#shopBtn');

const adminTargetInput = $('#adminTarget');
const adminAmountInput = $('#adminAmount');
const giveBtn = $('#giveBtn');
const banBtn = $('#banBtn');
const unbanBtn = $('#unbanBtn');
const delBtn = $('#delBtn');

const floatingBall = $('#floatingBall');
const ballArea = $('#ballArea');
const accountSection = $('#accountSection');

/* State */
let currentUser = null;       // { username, isAdmin, money }
let secondsLeft = 30;
let saveTimer = null;

/* Debounced save to localStorage */
function scheduleSave(){
  if(saveTimer) clearTimeout(saveTimer);
  saveTimer = setTimeout(()=>{
    try {
      localStorage.setItem(KEY_USERS, JSON.stringify(users));
      localStorage.setItem(KEY_LOGS, JSON.stringify(logs));
    } catch(e){
      console.warn('Save failed', e);
    }
    saveTimer = null;
  }, 600);
}

/* Logging */
function addLog(text){
  logs.unshift(`[${new Date().toLocaleTimeString()}] ${text}`);
  if(logs.length>500) logs.length = 500;
  renderLogs();
  scheduleSave();
}

/* Render players (batched) */
function renderPlayers(){
  const frag = document.createDocumentFragment();
  const names = Object.keys(users).sort((a,b)=>a.localeCompare(b));
  for(const u of names){
    const usr = users[u];
    const row = document.createElement('div');
    row.className = 'players-row';

    const left = document.createElement('div');
    left.innerHTML = `<div class="player-name">${u}${usr.isAdmin? ' (admin)':''}</div><div class="small">money: $${usr.money}${usr.banned? ' • BANNED':''}</div>`;

    const actions = document.createElement('div');
    actions.className = 'player-actions';

    const btnGive = document.createElement('button'); btnGive.textContent = '+5'; btnGive.className='btn-green';
    btnGive.addEventListener('click', ()=> adminGive(u,5));
    actions.appendChild(btnGive);

    const btnBan = document.createElement('button'); btnBan.textContent = usr.banned? 'Unban':'Ban';
    if(!usr.banned) btnBan.className='btn-red';
    btnBan.addEventListener('click', ()=> usr.banned ? adminUnban(u) : adminBan(u));
    actions.appendChild(btnBan);

    const btnDel = document.createElement('button'); btnDel.textContent='Delete'; btnDel.className='btn-muted';
    btnDel.addEventListener('click', ()=> adminDelete(u));
    actions.appendChild(btnDel);

    row.appendChild(left);
    row.appendChild(actions);
    frag.appendChild(row);
  }
  playersDiv.innerHTML = '';
  playersDiv.appendChild(frag);
}

/* Render logs (admin sees them) */
function renderLogs(){
  logsDiv.innerHTML = '';
  for(const l of logs.slice(0,200)){
    const d = document.createElement('div'); d.textContent = l;
    logsDiv.appendChild(d);
  }
}

/* UI update */
function renderUI(){
  moneyDisplay.textContent = currentUser ? `Money: $${currentUser.money}` : 'Money: $0';
  timerDisplay.textContent = `Next +1 in: ${secondsLeft}s`;
  accountSection.textContent = currentUser ? `Logged in: ${currentUser.username}${currentUser.isAdmin? ' (admin)':''}` : 'Not logged in';
  $('#loginBtn').style.display = currentUser ? 'none' : '';
  $('#signupBtn').style.display = currentUser ? 'none' : '';
  $('#logoutBtn').style.display = currentUser ? '' : 'none';
  adminHint.textContent = currentUser?.isAdmin ? 'Admin' : 'Admins only';
  renderPlayers();
  renderLogs();
}

/* Session persistence: only username & isAdmin (no password/hash) */
function saveSession(){
  if(!currentUser) sessionStorage.removeItem(KEY_SESSION);
  else sessionStorage.setItem(KEY_SESSION, JSON.stringify({ username: currentUser.username, isAdmin: currentUser.isAdmin }));
}
function loadSession(){
  try{
    const s = sessionStorage.getItem(KEY_SESSION);
    if(!s) return;
    const o = JSON.parse(s);
    if(o && o.username && users[o.username] && !users[o.username].banned){
      currentUser = { username:o.username, isAdmin: !!users[o.username].isAdmin, money: users[o.username].money || 0 };
    } else sessionStorage.removeItem(KEY_SESSION);
  }catch(e){ sessionStorage.removeItem(KEY_SESSION); }
}

/* Auth flows */
async function attemptSignup(username, password){
  username = (username||'').trim();
  if(!username || !password) return showPopup('Enter username & password');
  if(users[username]) return showPopup('Username exists');
  const h = await hashPassword(password);
  users[username] = { hash: h, money: 0, isAdmin: false, banned: false };
  addLog(`Signup: ${username}`);
  scheduleSave();
  showPopup('Sign-up success! Log in now.');
  signupBackdrop.style.display = 'none';
}

async function attemptLogin(username, password){
  username = (username||'').trim();
  if(!username || !password) return showPopup('Enter username & password');
  if(!users[username]) return showPopup('User not found');
  if(users[username].banned) return showPopup('User is banned');
  const h = await hashPassword(password);
  if(h !== users[username].hash) return showPopup('Wrong password');
  currentUser = { username, isAdmin: !!users[username].isAdmin, money: users[username].money || 0 };
  saveSession();
  addLog(`Login: ${username}`);
  loginBackdrop.style.display = 'none';
  renderUI();
}

/* Logout */
function logout(){
  if(currentUser) addLog(`Logout: ${currentUser.username}`);
  currentUser = null;
  saveSession();
  renderUI();
}

/* Admin operations (all mutate users, push logs, schedule save) */
function adminGive(username, amount){
  if(!currentUser?.isAdmin) return showPopup('Admin only');
  if(!users[username]) return showPopup('User not found');
  users[username].money = (users[username].money||0) + Number(amount||0);
  addLog(`Admin ${currentUser.username} gave $${amount} to ${username}`);
  scheduleSave();
  if(currentUser.username === username) currentUser.money = users[username].money;
  renderUI();
}
function adminBan(username){
  if(!currentUser?.isAdmin) return showPopup('Admin only');
  if(!users[username]) return showPopup('User not found');
  users[username].banned = true;
  addLog(`Admin ${currentUser.username} banned ${username}`);
  scheduleSave();
  if(currentUser.username === username){ logout(); saveSession(); }
  renderUI();
}
function adminUnban(username){
  if(!currentUser?.isAdmin) return showPopup('Admin only');
  if(!users[username]) return showPopup('User not found');
  users[username].banned = false;
  addLog(`Admin ${currentUser.username} unbanned ${username}`);
  scheduleSave();
  renderUI();
}
function adminDelete(username){
  if(!currentUser?.isAdmin) return showPopup('Admin only');
  if(!users[username]) return showPopup('User not found');
  if(username === currentUser.username) return showPopup("Can't delete yourself");
  delete users[username];
  addLog(`Admin ${currentUser.username} deleted ${username}`);
  scheduleSave();
  renderUI();
}

/* Quick admin controls wiring */
giveBtn.addEventListener('click', ()=>{
  const t = adminTargetInput.value.trim();
  const a = Number(adminAmountInput.value) || 0;
  if(!t) return showPopup('Enter target username');
  adminGive(t,a);
});
banBtn.addEventListener('click', ()=> {
  const t = adminTargetInput.value.trim(); if(!t) return showPopup('Enter target username'); adminBan(t);
});
unbanBtn.addEventListener('click', ()=> {
  const t = adminTargetInput.value.trim(); if(!t) return showPopup('Enter target username'); adminUnban(t);
});
delBtn.addEventListener('click', ()=> {
  const t = adminTargetInput.value.trim(); if(!t) return showPopup('Enter target username'); if(!confirm(`Delete ${t}?`)) return; adminDelete(t);
});

/* Popup helper */
let popupTimeout = null;
function showPopup(msg, ms=2000){
  popupEl.textContent = msg;
  popupEl.style.display = 'block';
  popupEl.style.opacity = '1';
  clearTimeout(popupTimeout);
  popupTimeout = setTimeout(()=> {
    popupEl.style.opacity = '0';
    setTimeout(()=> popupEl.style.display='none', 300);
  }, ms);
}

/* Login / Signup modal buttons */
loginBtn.addEventListener('click', ()=> { loginBackdrop.style.display = 'flex'; loginUserEl.focus(); });
loginCancelBtn.addEventListener('click', ()=> { loginBackdrop.style.display = 'none'; });
signupBtn.addEventListener('click', ()=> { signupBackdrop.style.display = 'flex'; signupUserEl.focus(); });
signupCancelBtn.addEventListener('click', ()=> { signupBackdrop.style.display = 'none'; });
loginSubmitBtn.addEventListener('click', async ()=> {
  await attemptLogin(loginUserEl.value, loginPassEl.value);
  loginUserEl.value=''; loginPassEl.value='';
});
signupSubmitBtn.addEventListener('click', async ()=> {
  await attemptSignup(signupUserEl.value, signupPassEl.value);
  signupUserEl.value=''; signupPassEl.value='';
});
logoutBtn.addEventListener('click', ()=> { logout(); });

shopBtn.addEventListener('click', ()=> showPopup('Shop placeholder (coming soon)', 1400));

/* ----------------- Money tick (single timer) ----------------- */
let tickLast = performance.now();
function startTick(){
  function tick(ts){
    const delta = ts - tickLast;
    // handle secondsLeft using delta accumulation
    // simpler: count with setInterval every 1s, but optimized: do in RAF
    // Use a micro-timer approach:
    if(!tickLast) tickLast = ts;
    const elapsed = Math.floor((ts - tickLast) / 1000);
    // only decrement by integer seconds passed
    if(elapsed >= 1){
      secondsLeft = Math.max(0, secondsLeft - elapsed);
      tickLast = ts - ((ts - tickLast) % 1000);
      if(secondsLeft <= 0){
        secondsLeft = 30;
        if(currentUser){
          users[currentUser.username].money = (users[currentUser.username].money||0) + 1;
          currentUser.money = users[currentUser.username].money;
          addLog(`${currentUser.username} auto +1`);
          scheduleSave();
        }
      }
      renderUI();
    }
    requestAnimationFrame(tick);
  }
  requestAnimationFrame(tick);
}
startTick();

/* -------------- Floating ball optimized animation -------------- */
/* Ball is positioned relative to ballArea. We'll animate with RAF and simple physics. */

let ballX=20, ballY=20, ballVX=3.5*(Math.random()<0.5?-1:1), ballVY=3*(Math.random()<0.5?-1:1);
function placeBall(x,y){
  floatingBall.style.transform = `translate(${x}px, ${y}px)`;
}
function startBall(){
  const areaRect = () => ballArea.getBoundingClientRect();
  floatingBall.style.display = 'block';
  let last = performance.now();
  function frame(t){
    const dt = Math.min(40, t - last); last = t;
    const rect = areaRect();
    const w = Math.max(1, rect.width - 60);
    const h = Math.max(1, rect.height - 60);
    ballX += ballVX * (dt / 16);
    ballY += ballVY * (dt / 16);
    if(ballX < 0){ ballX = 0; ballVX = -ballVX; }
    if(ballY < 0){ ballY = 0; ballVY = -ballVY; }
    if(ballX > w){ ballX = w; ballVX = -ballVX; }
    if(ballY > h){ ballY = h; ballVY = -ballVY; }
    placeBall(ballX, ballY);
    // occasionally randomize speed
    if(Math.random() < 0.008) { ballVX = (Math.random()*6+2)*(Math.random()<0.5?-1:1); ballVY = (Math.random()*6+2)*(Math.random()<0.5?-1:1); }
    requestAnimationFrame(frame);
  }
  requestAnimationFrame(frame);
}
startBall();

/* Click ball to get +5 (login required) */
floatingBall.addEventListener('click', (e)=>{
  e.stopPropagation();
  if(!currentUser) return showPopup('Log in to collect +5');
  users[currentUser.username].money = (users[currentUser.username].money||0) + 5;
  currentUser.money = users[currentUser.username].money;
  addLog(`${currentUser.username} clicked ball +5`);
  scheduleSave();
  renderUI();
});

/* Session load on start */
(function init(){
  try{
    const s = sessionStorage.getItem(KEY_SESSION);
    if(s){
      const o = JSON.parse(s);
      if(o.username && users[o.username] && !users[o.username].banned){
        currentUser = { username:o.username, isAdmin: !!users[o.username].isAdmin, money: users[o.username].money || 0 };
      } else sessionStorage.removeItem(KEY_SESSION);
    }
  }catch(e){ sessionStorage.removeItem(KEY_SESSION); }
  renderUI();
})();

/* Expose some actions from quick admin inputs */
giveBtn.addEventListener('click', ()=>{
  const t = adminTargetInput.value.trim();
  const a = Number(adminAmountInput.value) || 0;
  if(!t) return showPopup('Enter target username');
  adminGive(t,a);
});
banBtn.addEventListener('click', ()=> { const t = adminTargetInput.value.trim(); if(!t) return showPopup('Enter target username'); adminBan(t); });
unbanBtn.addEventListener('click', ()=> { const t = adminTargetInput.value.trim(); if(!t) return showPopup('Enter target username'); adminUnban(t); });
delBtn.addEventListener('click', ()=> { const t = adminTargetInput.value.trim(); if(!t) return showPopup('Enter target username'); if(!confirm(`Delete ${t}?`)) return; adminDelete(t); });

/* small helper wrappers used in UI (these call admin functions) */
function adminGive(username, amount){ adminGive_impl(username, amount); }
function adminBan(username){ adminBan_impl(username); }
function adminUnban(username){ adminUnban_impl(username); }
function adminDelete(username){ adminDelete_impl(username); }

/* implement wrappers (to avoid hoisting issues) */
function adminGive_impl(username, amount){
  if(!currentUser?.isAdmin) return showPopup('Admin only');
  if(!users[username]) return showPopup('User not found');
  users[username].money = (users[username].money||0) + Number(amount||0);
  addLog(`Admin ${currentUser.username} gave $${amount} to ${username}`);
  scheduleSave();
  if(currentUser.username === username) currentUser.money = users[username].money;
  renderUI();
}
function adminBan_impl(username){
  if(!currentUser?.isAdmin) return showPopup('Admin only');
  if(!users[username]) return showPopup('User not found');
  users[username].banned = true;
  addLog(`Admin ${currentUser.username} banned ${username}`);
  scheduleSave();
  if(currentUser.username === username){ logout(); saveSession(); }
  renderUI();
}
function adminUnban_impl(username){
  if(!currentUser?.isAdmin) return showPopup('Admin only');
  if(!users[username]) return showPopup('User not found');
  users[username].banned = false;
  addLog(`Admin ${currentUser.username} unbanned ${username}`);
  scheduleSave();
  renderUI();
}
function adminDelete_impl(username){
  if(!currentUser?.isAdmin) return showPopup('Admin only');
  if(!users[username]) return showPopup('User not found');
  if(username === currentUser.username) return showPopup("Can't delete yourself");
  delete users[username];
  addLog(`Admin ${currentUser.username} deleted ${username}`);
  scheduleSave();
  renderUI();
}

/* Save session helper */
function saveSession(){ if(!currentUser) sessionStorage.removeItem(KEY_SESSION); else sessionStorage.setItem(KEY_SESSION, JSON.stringify({ username: currentUser.username, isAdmin: currentUser.isAdmin })); }

/* Hook final: render loop keeps UI current */
(function renderLoop(){
  renderUI();
  requestAnimationFrame(renderLoop);
})();

</script>
</body>
</html>
