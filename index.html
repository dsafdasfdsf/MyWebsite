<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Money Game</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f0f4f8;
    margin: 0; padding: 0;
    display: flex; justify-content: center; align-items: center; min-height: 100vh;
  }
  #container {
    background: white;
    padding: 20px 30px;
    border-radius: 15px;
    width: 350px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
  }
  h2 {
    text-align: center;
    margin-bottom: 20px;
    color: #333;
  }
  input[type=text], input[type=password] {
    width: 100%;
    padding: 10px 12px;
    margin-bottom: 15px;
    border: 1.5px solid #ccc;
    border-radius: 10px;
    font-size: 16px;
    box-sizing: border-box;
    transition: border-color 0.3s;
  }
  input[type=text]:focus, input[type=password]:focus {
    border-color: #0070f3;
    outline: none;
  }
  button {
    width: 100%;
    padding: 12px;
    background: #0070f3;
    color: white;
    border: none;
    font-weight: 600;
    border-radius: 12px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.3s;
  }
  button:hover:not(:disabled) {
    background: #005bb5;
  }
  button:disabled {
    background: #aaa;
    cursor: not-allowed;
  }
  #message {
    color: red;
    text-align: center;
    margin-bottom: 10px;
  }
  #game, #adminPanel {
    display: none;
  }
  .log {
    max-height: 120px;
    overflow-y: auto;
    background: #eef3f7;
    border-radius: 12px;
    padding: 10px;
    font-size: 14px;
    color: #444;
    margin-top: 10px;
  }
  .money {
    font-weight: bold;
    font-size: 22px;
    color: #2a9d8f;
    text-align: center;
    margin-bottom: 10px;
  }
  label {
    font-weight: 600;
    display: block;
    margin-top: 10px;
  }
  select, input[type=number] {
    width: 100%;
    padding: 8px 10px;
    margin-top: 6px;
    border-radius: 10px;
    border: 1.5px solid #ccc;
    box-sizing: border-box;
  }
  .small-btn {
    margin-top: 10px;
    padding: 8px;
    width: 100%;
    border-radius: 10px;
    font-weight: 600;
  }
  .btn-danger {
    background: #d9534f;
  }
  .btn-danger:hover {
    background: #b52b27;
  }
  .btn-success {
    background: #5cb85c;
  }
  .btn-success:hover {
    background: #3c8d3c;
  }
</style>
</head>
<body>

<div id="container">

  <!-- Login / Signup -->
  <div id="auth">
    <h2>Login or Sign Up</h2>
    <div id="message"></div>
    <input type="text" id="username" placeholder="Username" autocomplete="off" />
    <input type="password" id="password" placeholder="Password" autocomplete="off" />
    <button id="loginBtn">Login</button>
    <button id="signupBtn" style="margin-top: 8px; background:#2a9d8f;">Sign Up</button>
  </div>

  <!-- Game Panel -->
  <div id="game">
    <h2>Welcome, <span id="playerName"></span>!</h2>
    <div class="money">Money: $<span id="moneyCount">0</span></div>
    <button id="logoutBtn" style="background:#d9534f;">Logout</button>
    <div class="log" id="gameLog"></div>
  </div>

  <!-- Admin Panel -->
  <div id="adminPanel">
    <h2>Admin Panel</h2>
    <div>
      <label for="playerSelect">Select Player</label>
      <select id="playerSelect"></select>

      <label for="moneyAmount">Money Amount</label>
      <input type="number" id="moneyAmount" min="1" value="10" />

      <button class="small-btn btn-success" id="giveMoneyBtn">Give Money</button>
      <button class="small-btn btn-danger" id="banPlayerBtn">Ban Player</button>
    </div>
    <button id="adminLogoutBtn" style="background:#d9534f; margin-top: 15px;">Logout</button>
    <div class="log" id="adminLog"></div>
  </div>

</div>

<script>
  // Helper functions for localStorage data
  function getUsers() {
    return JSON.parse(localStorage.getItem('users') || '{}');
  }
  function saveUsers(users) {
    localStorage.setItem('users', JSON.stringify(users));
  }
  function getBannedUsers() {
    return JSON.parse(localStorage.getItem('bannedUsers') || '[]');
  }
  function saveBannedUsers(banned) {
    localStorage.setItem('bannedUsers', JSON.stringify(banned));
  }

  // Current session info
  let currentUser = null;
  let earningInterval = null;

  // DOM elements
  const authDiv = document.getElementById('auth');
  const gameDiv = document.getElementById('game');
  const adminDiv = document.getElementById('adminPanel');
  const messageEl = document.getElementById('message');
  const usernameInput = document.getElementById('username');
  const passwordInput = document.getElementById('password');
  const loginBtn = document.getElementById('loginBtn');
  const signupBtn = document.getElementById('signupBtn');
  const playerNameEl = document.getElementById('playerName');
  const moneyCountEl = document.getElementById('moneyCount');
  const logoutBtn = document.getElementById('logoutBtn');
  const adminLogoutBtn = document.getElementById('adminLogoutBtn');
  const gameLog = document.getElementById('gameLog');
  const adminLog = document.getElementById('adminLog');
  const playerSelect = document.getElementById('playerSelect');
  const moneyAmountInput = document.getElementById('moneyAmount');
  const giveMoneyBtn = document.getElementById('giveMoneyBtn');
  const banPlayerBtn = document.getElementById('banPlayerBtn');

  // Initial admin account setup
  function initAdmin() {
    let users = getUsers();
    if (!users['admin']) {
      users['admin'] = { password: 'admin123', money: 0, role: 'admin' };
      saveUsers(users);
    }
  }

  // Add log entry
  function addLog(logArea, text) {
    const time = new Date().toLocaleTimeString();
    const entry = document.createElement('div');
    entry.textContent = `[${time}] ${text}`;
    logArea.appendChild(entry);
    logArea.scrollTop = logArea.scrollHeight;
  }

  // Show message
  function showMessage(text) {
    messageEl.textContent = text;
    setTimeout(() => {
      messageEl.textContent = '';
    }, 3000);
  }

  // Update money display
  function updateMoney() {
    const users = getUsers();
    if (!currentUser) return;
    moneyCountEl.textContent = users[currentUser].money || 0;
  }

  // Start earning money every 30 seconds
  function startEarning() {
    earningInterval = setInterval(() => {
      const users = getUsers();
      if (!currentUser) return;
      users[currentUser].money = (users[currentUser].money || 0) + 1;
      saveUsers(users);
      updateMoney();
      addLog(gameLog, 'Earned 1 money');
    }, 30000);
  }

  // Stop earning money
  function stopEarning() {
    clearInterval(earningInterval);
  }

  // Load player list into select dropdown (admin)
  function loadPlayerList() {
    playerSelect.innerHTML = '';
    const users = getUsers();
    Object.keys(users).forEach(u => {
      if (u !== 'admin') {
        const option = document.createElement('option');
        option.value = u;
        option.textContent = u;
        playerSelect.appendChild(option);
      }
    });
  }

  // Ban player
  function banPlayer(username) {
    if (!username) return;
    const banned = getBannedUsers();
    if (!banned.includes(username)) {
      banned.push(username);
      saveBannedUsers(banned);
      addLog(adminLog, `Banned player: ${username}`);
      showMessage(`Player "${username}" banned.`);
      loadPlayerList();
    }
  }

  // Give money to player
  function giveMoney(username, amount) {
    const users = getUsers();
    if (!users[username]) {
      showMessage(`Player "${username}" does not exist.`);
      return;
    }
    users[username].money = (users[username].money || 0) + amount;
    saveUsers(users);
    addLog(adminLog, `Gave ${amount} money to ${username}`);
    showMessage(`Gave ${amount} money to ${username}`);
  }

  // Login handler
  function login() {
    const username = usernameInput.value.trim();
    const password = passwordInput.value;
    if (!username || !password) {
      showMessage('Enter username and password');
      return;
    }
    const banned = getBannedUsers();
    if (banned.includes(username)) {
      showMessage('You are banned!');
      return;
    }
    const users = getUsers();
    if (!users[username]) {
      showMessage('User not found');
      return;
    }
    if (users[username].password !== password) {
      showMessage('Wrong password');
      return;
    }

    currentUser = username;
    usernameInput.value = '';
    passwordInput.value = '';
    messageEl.textContent = '';

    authDiv.style.display = 'none';

    if (users[username].role === 'admin') {
      adminDiv.style.display = 'block';
      loadPlayerList();
      addLog(adminLog, 'Admin logged in');
    } else {
      gameDiv.style.display = 'block';
      playerNameEl.textContent = currentUser;
      updateMoney();
      addLog(gameLog, 'Player logged in');
      startEarning();
    }
  }

  // Signup handler
  function signup() {
    const username = usernameInput.value.trim();
    const password = passwordInput.value;
    if (!username || !password) {
      showMessage('Enter username and password');
      return;
    }
    let users = getUsers();
    if (users[username]) {
      showMessage('Username already taken');
      return;
    }
    const banned = getBannedUsers();
    if (banned.includes(username)) {
      showMessage('You are banned!');
      return;
    }
    users[username] = { password: password, money: 0, role: 'player' };
    saveUsers(users);
    showMessage('Account created! You can now login.');
    usernameInput.value = '';
    passwordInput.value = '';
  }

  // Logout handler for player
  function logout() {
    stopEarning();
    addLog(gameLog, 'Player logged out');
    currentUser = null;
    gameDiv.style.display = 'none';
    authDiv.style.display = 'block';
  }

  // Logout handler for admin
  function adminLogout() {
    currentUser = null;
    addLog(adminLog, 'Admin logged out');
    adminDiv.style.display = 'none';
    authDiv.style.display = 'block';
  }

  // Event Listeners
  loginBtn.addEventListener('click', login);
  signupBtn.addEventListener('click', signup);
  logoutBtn.addEventListener('click', logout);
  adminLogoutBtn.addEventListener('click', adminLogout);
  giveMoneyBtn.addEventListener('click', () => {
    const player = playerSelect.value;
    const amount = parseInt(moneyAmountInput.value);
    if (!player || isNaN(amount) || amount <= 0) {
      showMessage('Select player and valid amount');
      return;
    }
    giveMoney(player, amount);
  });
  banPlayerBtn.addEventListener('click', () => {
    const player = playerSelect.value;
    if (!player) {
      showMessage('Select player');
      return;
    }
    banPlayer(player);
  });

  // Initialize admin account on page load
  initAdmin();

</script>

</body>
</html>

