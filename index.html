<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Money Game</title>
<style>
  /* Reset & base */
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }
  body, html {
    height: 100%;
    background: #fff;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: #222;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
  }
  #app {
    width: 360px;
    background: #f9f9f9;
    border-radius: 15px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    padding: 25px;
    text-align: center;
    overflow: hidden;
    position: relative;
  }

  h1 {
    margin-bottom: 15px;
    font-weight: 700;
    color: #333;
  }

  input, button, select {
    border-radius: 12px;
    border: 1.5px solid #ddd;
    padding: 10px 15px;
    font-size: 1rem;
    margin: 8px 0;
    width: 100%;
    transition: border-color 0.3s ease;
  }
  input:focus, select:focus {
    outline: none;
    border-color: #007BFF;
  }
  button {
    background-color: #007BFF;
    border: none;
    color: white;
    font-weight: 600;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.25s ease;
  }
  button:hover {
    background-color: #0056b3;
  }

  .fade-slide {
    opacity: 0;
    transform: translateY(15px);
    animation-fill-mode: forwards;
    animation-duration: 0.5s;
    animation-timing-function: cubic-bezier(0.4,0,0.2,1);
  }
  .fade-slide.show {
    animation-name: fadeInSlideUp;
  }
  @keyframes fadeInSlideUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  #moneyDisplay {
    font-size: 1.5rem;
    font-weight: 700;
    margin: 15px 0;
    color: #007BFF;
  }

  #log {
    height: 110px;
    background: #fff;
    border: 1.5px solid #ddd;
    border-radius: 12px;
    overflow-y: auto;
    text-align: left;
    padding: 10px;
    font-size: 0.9rem;
    color: #555;
    margin-top: 15px;
  }

  /* Shop styling */
  #shop {
    margin-top: 15px;
    text-align: left;
  }
  .shop-item {
    background: #fff;
    margin-bottom: 10px;
    padding: 12px 15px;
    border-radius: 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border: 1.5px solid #ddd;
    cursor: pointer;
    user-select: none;
    transition: box-shadow 0.3s ease, border-color 0.3s ease;
  }
  .shop-item:hover {
    box-shadow: 0 4px 10px rgba(0,123,255,0.2);
    border-color: #007BFF;
  }
  .shop-item > span {
    font-weight: 600;
    color: #333;
  }
  .shop-item > button {
    width: auto;
    padding: 6px 12px;
  }

  /* Admin Panel */
  #adminPanel {
    margin-top: 20px;
    background: #eef5ff;
    border-radius: 15px;
    padding: 15px;
    max-height: 250px;
    overflow-y: auto;
    text-align: left;
    font-size: 0.9rem;
    color: #222;
  }
  #adminPanel h2 {
    text-align: center;
    margin-bottom: 10px;
    color: #004085;
  }
  .user-list {
    list-style: none;
    padding-left: 0;
    margin-bottom: 10px;
  }
  .user-list li {
    padding: 6px 8px;
    border-radius: 10px;
    background: #d1e7ff;
    margin-bottom: 5px;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.25s ease;
  }
  .user-list li:hover {
    background: #a9d1ff;
  }

  /* Banned Screen */
  #bannedScreen {
    position: absolute;
    inset: 0;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 15px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    color: #b00020;
    font-weight: 700;
    font-size: 1.3rem;
    box-shadow: 0 0 15px red;
    padding: 30px;
    z-index: 99;
  }
  #bannedScreen button {
    margin-top: 20px;
    background-color: #b00020;
  }
  #bannedScreen button:hover {
    background-color: #7a0015;
  }
</style>
</head>
<body>
<div id="app" class="fade-slide show">
  <h1>Simple Game</h1>

  <div id="loginScreen">
    <input id="username" placeholder="Username" autocomplete="off" />
    <input id="password" type="password" placeholder="Password" autocomplete="off" />
    <button id="loginBtn">Login</button>
    <button id="signupBtn">Sign Up</button>
  </div>

  <div id="gameScreen" style="display:none;">
    <div id="moneyDisplay">Money: $0</div>

    <div id="shop"></div>

    <div id="log"></div>
  </div>

  <div id="adminPanel" style="display:none;">
    <h2>Admin Panel</h2>
    <ul class="user-list" id="userList"></ul>
    <input id="adminMoneyInput" type="number" min="1" placeholder="Money amount" />
    <button id="giveMoneyBtn">Give Money</button>
    <button id="banUserBtn">Ban User</button>
    <div id="adminLogs" style="margin-top:10px; font-size:0.8rem; color:#555; max-height:100px; overflow-y:auto; background:#fff; padding:8px; border-radius:12px; border:1.5px solid #ccc;"></div>
  </div>

  <div id="bannedScreen" style="display:none;">
    <div>You have been banned from this site.</div>
    <button id="appealBtn">Apply for Appeal</button>
  </div>
</div>

<script>
(() => {
  // State
  let users = JSON.parse(localStorage.getItem('users')) || [];
  let bannedIPs = JSON.parse(localStorage.getItem('bannedIPs')) || [];
  let adminLogs = [];
  let currentUser = null;
  const visitorIP = 'mocked-ip'; // Replace this with real IP detection if backend is used

  // Elements
  const loginScreen = document.getElementById('loginScreen');
  const gameScreen = document.getElementById('gameScreen');
  const adminPanel = document.getElementById('adminPanel');
  const bannedScreen = document.getElementById('bannedScreen');
  const moneyDisplay = document.getElementById('moneyDisplay');
  const shop = document.getElementById('shop');
  const log = document.getElementById('log');
  const userList = document.getElementById('userList');
  const adminMoneyInput = document.getElementById('adminMoneyInput');
  const adminLogsElem = document.getElementById('adminLogs');
  const appealBtn = document.getElementById('appealBtn');

  // Simple shop items
  const shopItems = [
    { id: 'item1', name: 'Speed Boost', price: 5 },
    { id: 'item2', name: 'Double Money', price: 10 },
    { id: 'item3', name: 'VIP Badge', price: 20 },
  ];

  // Utility functions
  function saveUsers() {
    localStorage.setItem('users', JSON.stringify(users));
  }
  function saveBannedIPs() {
    localStorage.setItem('bannedIPs', JSON.stringify(bannedIPs));
  }
  function addLog(message) {
    const entry = `${new Date().toLocaleTimeString()}: ${message}`;
    log.textContent = entry + '\n' + log.textContent;
    if (log.textContent.length > 1000) log.textContent = log.textContent.slice(0, 1000);
  }
  function addAdminLog(message) {
    adminLogs.unshift(`${new Date().toLocaleTimeString()}: ${message}`);
    adminLogsElem.textContent = adminLogs.slice(0, 20).join('\n');
  }
  function updateMoneyDisplay() {
    moneyDisplay.textContent = `Money: $${currentUser.money}`;
  }
  function renderShop() {
    shop.innerHTML = '';
    shopItems.forEach(item => {
      const div = document.createElement('div');
      div.className = 'shop-item';
      div.innerHTML = `<span>${item.name} - $${item.price}</span><button data-id="${item.id}">Buy</button>`;
      div.querySelector('button').onclick = () => {
        if (currentUser.money >= item.price) {
          currentUser.money -= item.price;
          saveUsers();
          updateMoneyDisplay();
          addLog(`Bought ${item.name} for $${item.price}`);
          addAdminLog(`${currentUser.username} bought ${item.name}`);
        } else {
          addLog(`Not enough money for ${item.name}`);
        }
      };
      shop.appendChild(div);
    });
  }
  function renderUserList() {
    userList.innerHTML = '';
    users.forEach(u => {
      const li = document.createElement('li');
      li.textContent = u.username;
      li.onclick = () => {
        selectedUser = u;
        userList.querySelectorAll('li').forEach(el => el.style.backgroundColor = '');
        li.style.backgroundColor = '#a9d1ff';
      };
      userList.appendChild(li);
    });
  }

  // Login & Signup
  document.getElementById('loginBtn').onclick = () => {
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value;
    if (!username || !password) return alert('Please enter username & password');
    if (bannedIPs.includes(visitorIP)) {
      showBanned();
      return;
    }
    const user = users.find(u => u.username === username && u.password === password);
    if (!user) return alert('Invalid credentials');
    currentUser = user;
    afterLogin();
  };
  document.getElementById('signupBtn').onclick = () => {
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value;
    if (!username || !password) return alert('Please enter username & password');
    if (users.find(u => u.username === username)) return alert('Username already taken');
    const newUser = { username, password, money: 0, isAdmin: false };
    users.push(newUser);
    saveUsers();
    alert('Account created! Please login.');
  };

  // After login setup
  let selectedUser = null;
  function afterLogin() {
    loginScreen.style.display = 'none';
    gameScreen.style.display = 'block';
    updateMoneyDisplay();
    renderShop();
    addLog('Welcome ' + currentUser.username);
    if (currentUser.isAdmin) {
      adminPanel.style.display = 'block';
      renderUserList();
    }
  }

  // Money increment every 30 seconds
  setInterval(() => {
    if (!currentUser) return;
    currentUser.money++;
    saveUsers();
    updateMoneyDisplay();
  }, 30000);

  // Admin panel buttons
  document.getElementById('giveMoneyBtn').onclick = () => {
    if (!selectedUser) return alert('Select a user first');
    const amount = parseInt(adminMoneyInput.value);
    if (isNaN(amount) || amount <= 0) return alert('Enter a valid amount');
    selectedUser.money += amount;
    saveUsers();
    addAdminLog(`Gave $${amount} to ${selectedUser.username}`);
    if (selectedUser.username === currentUser.username) updateMoneyDisplay();
    renderUserList();
  };
  document.getElementById('banUserBtn').onclick = () => {
    if (!selectedUser) return alert('Select a user first');
    if (selectedUser.isAdmin) return alert('Cannot ban admin');
    bannedIPs.push(visitorIP); // Note: This is just demo; ideally ban by IP of selected user
    saveBannedIPs();
    addAdminLog(`Banned user ${selectedUser.username}`);
    alert(`User ${selectedUser.username} has been banned.`);
    // Optionally log them out if you implement real sessions
  };

  // Ban screen & appeal button
  function showBanned() {
    bannedScreen.style.display = 'flex';
  }
  appealBtn.onclick = () => {
    alert('Appeal sent! Admins will review your case.');
  };

  // Initial check
  if (bannedIPs.includes(visitorIP)) {
    showBanned();
  }
})();
</script>
</body>
</html>
